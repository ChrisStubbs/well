<div class="table-container">
    <ol class="breadcrumb">
        <li class="active">Routes</li>
    </ol>
</div>
<div class="jumbotron">
    <div class="content" *ngIf="!isLoading">
        <div class="row">
            <div class="col-md-6">
                <div class="btn-group">
                    <button type="button" class="btn btn-default">Clean</button>
                    <button type="button" class="btn btn-default">Exceptions</button>
                    <button type="button" class="btn btn-primary">Clear Filter</button>
                </div>
            </div>
            <div class="col-md-6 pull-right">
                <div class="pull-right">
                    <ow-split-button [options]="actions"></ow-split-button>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12"> &nbsp;</div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <p-dataTable [value]="routes" [rows]="rowCount" [paginator]="true" [pageLinks]="3" [rowsPerPageOptions]="rowsPerPageOptions" #dt [(selection)]="selectedRoutes">
                    <p-column header="Branch" field="branch" [filter]="true" filterMatchMode="contains" [sortable]="true">
                        <ng-template pTemplate="filter" let-col>
                            <select class="form-control" id="searchBranch"
                                    (change)="dt.filter($event.target.value,col.field,col.filterMatchMode)">
                                <option *ngFor="let branch of branches" [value]="branch[0] || '' ">
                                    {{ branch[1] }}
                                </option>
                            </select>
                        </ng-template>
                    </p-column>
                    <p-column header="Route" field="route" [filter]="true" filterMatchMode="contains" [sortable]="true"></p-column>
                    <p-column header="Date" field="routeDate" [filter]="true" filterMatchMode="contains" [sortable]="true" [style]="{'overflow':'visible','width':'200px'}">
                        <ng-template pTemplate="filter" let-col>
                            <ow-date (change)="dt.filter($event.target.value,col.field,col.filterMatchMode)"></ow-date>
                        </ng-template>
                        <ng-template let-route="rowData" pTemplate="body">
                            <span>
                                {{route.routeDate | date:'dd/MM/yyyy' }}
                            </span>
                        </ng-template>
                    </p-column>
                    <p-column header="Stops" field="stopCount" [filter]="true" filterMatchMode="equals" [sortable]="true"></p-column>
                    <p-column header="Status" field="routeStatus" [filter]="true" filterMatchMode="contains" [sortable]="true">
                        <ng-template pTemplate="filter" let-col>
                            <select class="form-control" id="searchStatus"
                                    (change)="dt.filter($event.target.value,col.field,col.filterMatchMode)">
                                <option *ngFor="let status of jobStatus" [value]="status[0] || ''">
                                    {{ status[1] }}
                                </option>
                            </select>
                        </ng-template>
                    </p-column>
                    <p-column header="Exceptions" field="exceptionCount" [filter]="true" filterMatchMode="equals" [sortable]="true"></p-column>
                    <p-column header="Driver" field="driverName" [filter]="true" filterMatchMode="contains" [sortable]="true"></p-column>
                    <p-column header="Assignee" field="assignee" [filter]="true" filterMatchMode="contains" [sortable]="true">
                        <ng-template let-route="rowData" pTemplate="body">
                            <!--<span *ngIf="isReadOnlyUser">{{delivery.assigned}}</span>
                            <a *ngIf="!isReadOnlyUser" class="assign" (click)="allocateUser(delivery)">{{delivery.assigned}}</a>-->
                        </ng-template>

                    </p-column>
                    <p-column [style]="{'width':'38px'}" selectionMode="multiple"></p-column>
                </p-dataTable>
            </div>
        </div>
    </div>
</div>

